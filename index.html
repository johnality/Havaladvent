<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HAVILADVENT CALENDAR</title>

<link href="https://fonts.googleapis.com/css2?family=Cardo&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Patua+One&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Montserrat', sans-serif;
  background-color: #f5f5f5;
  color: #222;
  text-align: center;
  margin: 0;
  padding: 10px;
}
h1 {
  font-size: 5em;
  margin: 20px 0 0.2em 0;
  color: #b22222;
  font-family: 'Fredoka', serif;
}

.grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 20px;
  max-width: 1200px;
  margin: 40px auto;
}

.square {
  background: #ddd;
  border: 2px solid #bbb;
  border-radius: 50%;
  aspect-ratio: 1/1;
  cursor: pointer;
  position: relative;
  transition: transform 0.2s;
  overflow: hidden;
}
.square:hover { transform: scale(1.05); }

.square span {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  font-size: 3em;
  color: #b22222;
  font-family: 'Fredoka', serif;
}

.revealed {
  display: flex;
  align-items: center;
  justify-content: center;
  background: #000;
}
.revealed img {
  height: 100%;
  width: 100%;
  object-fit: cover;
  cursor: pointer;
}

/* X close button */
.squareResetBtn {
  position: absolute;
  top: 5px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 1.3em;
  border: none;
  background: rgba(255,255,255,0.8);
  border-radius: 50%;
  width: 24px;
  height: 24px;
  line-height: 20px;
  text-align: center;
  cursor: pointer;
  z-index: 2;
}

/* Modal */
.modal {
  display: none;
  position: fixed;
  z-index: 10;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.8);
  justify-content: center;
  align-items: center;
}
.modal-content {
  background: #fff;
  color: #222;
  padding: 30px;
  border-radius: 15px;
  max-width: 640px;
  width: 90%;
  text-align: left;
  font-size: 1.1rem;
  display: flex;
  flex-direction: row;
  position: relative;
}
.close {
  position: absolute;
  top: 10px; right: 15px;
  font-size: 1.5em;
  cursor: pointer;
  color: #b22222;
}
.poster img {
  max-height: 400px;
  border-radius: 10px;
}
.film-info {
  flex: 1;
  margin-left: 20px;
}
#modalTitle { font-family: 'Cardo', serif; font-size: 2rem; margin: 0; }
#modalYear {
  display: block;
  font-size: 1.2rem;
  opacity: 0.7;
  margin: 3px 0 15px 0;
}
.tags {
  margin-top: 15px;
  font-style: italic;
  color: #555;
  font-size: 1rem;
}
</style>
</head>
<body>

<h1>HAVILADVENT CALENDAR</h1>
<div class="grid" id="calendar"></div>

<button id="revealAll" style="margin: 10px auto; display: block; padding: 10px 20px; font-size: 1rem; cursor: pointer; border-radius: 8px; border: none; background-color: #333; color: white; font-family: 'Fredoka', serif;">
  REVEAL ALL
</button>
  
<button id="resetAll" style="margin: 20px auto; display: block; padding: 10px 20px; font-size: 1rem; cursor: pointer; border-radius: 8px; border: none; background-color: #b22222; color: white; font-family: 'Fredoka', serif;">
  RESET
</button>

<!-- Modal -->
<div class="modal" id="filmModal">
  <div class="modal-content">
    <span class="close" id="closeModal">&times;</span>
    <div class="poster">
      <img id="modalPoster" src="" alt="Film Poster">
    </div>
    <div class="film-info">
      <h3 id="modalTitle">Film Title</h3>
      <span id="modalYear">(Year)</span>
      <div id="modalMeta" style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;"></div>
      <p id="modalDesc">Description goes here.</p>
      <p id="modalTags" class="tags"></p>
      <img id="modalStreaming" alt="Streaming Service" style="width: 110px; height: auto; margin-top: 10px; object-fit: contain;">
    </div>
  </div>
</div>

<script>
const calendar = document.getElementById('calendar');
let openedSquares = JSON.parse(localStorage.getItem('openedSquaresHAVAL')) || {};

const startYear = 2001;
const numDays = 25;
const years = Array.from({length: numDays}, (_, i) => startYear + i);

/* ✅ Rainbow color sets */
const rainbow = [
  { light: "#ffcccc", dark: "#cc0000" }, // red
  { light: "#ffe5cc", dark: "#cc6600" }, // orange
  { light: "#ccffcc", dark: "#009900" }, // green
  { light: "#cce5ff", dark: "#0059b3" }, // blue
  { light: "#e5ccff", dark: "#6600cc" }  // purple
];

const films = [



 { title: "The Royal Tenenbaums", year: 2001, image: "images/royal.jpg", poster: "images/royal_poster.jpg", runtime: " 110 min", rottenScore: "81%", letterboxdScore: "4.1", description: "An ill-fated New York family reunites with their estranged father. Wes Anderson’s classic dramedy combines trademark quirkiness with real poignancy.", tags: ["Drama", "Comedy"], streaming: "images/hulu.png"},
 { title: "Lilo and Stitch",    year: 2002,    image: "images/lilo.jpg",    poster: "images/lilo_poster.jpg",    runtime: "85 min",    rottenScore: "86%",    letterboxdScore: "4.1",    description: "A mischievous alien is adopted by a little girl in Hawaii. Edgier than many Disney films, this fun and charming story explores big issues of family and loyalty.",    tags: ["Animation", "Adventure", "Comedy"],    streaming: "images/disney.png"},
 { title: "Coffee and Cigarettes", year: 2003, image: "images/coffee2.jpg", poster: "images/coffee_poster.jpg", runtime: "97 min", rottenScore: "63%", letterboxdScore: "3.8", description: "An anthology of shorts featuring unique characters conversing over coffee and cigarettes. A quirkily engaging, star-studded film from indie icon Jim Jarmusch.", tags: ["Comedy", "Drama"], streaming: "images/hbo_logo3.png"},
 { title: "Howl’s Moving Castle", year: 2004, image: "images/howl.jpg", poster: "images/howl_poster.jpg", runtime: "119 min", rottenScore: "88%", letterboxdScore: "4.4", description: "A girl gets cursed by a witch, meets a wizard, and gets caught up in a resistance. Exquisitely crafted by master animator Hayao Miyazaki, this fantastical story is a timeless delight.", tags: ["Animation", "Fantasy"], streaming: "images/hbo_logo3.png"},
 { title: "Grizzly Man", year: 2005, image: "images/grizz.jpg", poster: "images/grizz_poster.jpg", runtime: "103 min", rottenScore: "93%", letterboxdScore: "4.1", description: "A unique documentary about one man’s obsession with grizzly bears in Alaska. The fascinating subject is explored by Werner Herzog in his own eccentric style.", tags: ["Documentary"], streaming: "images/prime_logo.png"},
  { title: "The Host", year: 2006, image: "images/host.jpg", poster: "images/host_poster.jpg", runtime: "120 min", rottenScore: "93%", letterboxdScore: "3.8", description: "A teenage girl is captured by a mutated creature living in a polluted Seoul river. Entertaining AND intellectually satisfying - Bong Joon Ho combines scares, laughs, and satire in a riveting monster movie.", tags: ["Horror", "Comedy"], streaming: "images/hulu.png"},
 { title: "Juno", year: 2007, image: "images/juno.jpg", poster: "images/juno_poster.jpg", runtime: " 96 min", rottenScore: "93%", letterboxdScore: "3.8", description: "Faced with an unplanned pregnancy, a precocious Minnesota teen finds a couple to adopt the baby. Jason Reitman delivers a bright, funny coming-of-age story with a decidedly noughties feel.", tags: ["Comedy", "Drama"], streaming: "images/hulu.png"},
  { title: "Let the Right One In", year: 2008, image: "images/let.jpg", poster: "images/let_poster.jpg", runtime: "115 min", rottenScore: "98%", letterboxdScore: "4.0", description: "In 1980s Sweden, a bullied 12-year-old makes friends with his mysterious neighbor. Tomas Alfredson reinvigorates the vampire genre, mixing scares with intelligent storytelling.", tags: ["Drama", "Horror"], streaming: "images/prime_logo.png"},
 { title: "Mary and Max", year: 2009, image: "images/mary.jpg", poster: "images/mary_poster.jpg", runtime: "92 min", rottenScore: "96%", letterboxdScore: "4.3", description: "A lonely Australian girl and elderly New Yorker become unlikely pen pals. Adam Elliot’s lovingly crafted stopmotion is startlingly inventive and emotionally resonant.", tags: ["Animation", "Comedy", "Drama"], streaming: "images/hulu.png"},
 { title: "Toy Story 3", year: 2010, image: "images/toy.jpg", poster: "images/toy_poster.jpg", runtime: "102 min", rottenScore: "98%", letterboxdScore: "4.0", description: "Andy’s toys find themselves shipped off to a sinister day care center. This brilliant third installment blends comedy, adventure, and raw emotion.", tags: ["Animation", "Adventure", "Comedy"], streaming: "images/disney.png"},
  { title: "The Tree of Life", year: 2011, image: "images/tree.jpg", poster: "images/tree_poster.jpg", runtime: "139 min", rottenScore: "86%", letterboxdScore: "3.8", description: "Existential questions explored in a man's life journey from childhood innocence to adult disillusionment. Terrence Malick's impressionistic style can be challenging - but offers deep emotional and visual rewards.", tags: ["Drama"], streaming: "images/hulu.png"},
 { title: "The Hunt", year: 2012, image: "images/hunt.jpg", poster: "images/hunt_poster.jpg", runtime: "116 min", rottenScore: "92%", letterboxdScore: "4.3", description: "A Danish teacher’s life is shattered by an unsettling rumor. Thomas Vinterberg explores difficult subject matter with courage and realism - anchored by Mads Mikkelsen's sympathetic performance.", tags: ["Drama"], streaming: "images/prime_logo.png"},
  { title: "The Great Beauty", year: 2013, image: "images/great.jpg", poster: "images/great_poster.jpg", runtime: "142 min", rottenScore: "91%", letterboxdScore: "4.1", description: "A 65 year old playboy reflects on the absurdity and exquisite beauty of life in Rome. Dazzlingly ambitious, thoroughly enthralling, and gorgeously filmed by Paolo Sorrentino.", tags: ["Drama", "Comedy"], streaming: "images/hbo_logo3.png"},
 { title: "The Babadook", year: 2014, image: "images/baba.jpg", poster: "images/baba_poster.jpg", runtime: "94 min", rottenScore: "98%", letterboxdScore: "3.3", description: "An Australian single mother tries to deal with her son’s fear of a sinister presence in the house. Jennifer Kent combines real horror with a heartfelt, moving story.", tags: ["Horror"], streaming: "images/hulu.png"},
 { title: "Tangerine", year: 2015, image: "images/tang.jpg", poster: "images/tang_poster.jpg", runtime: "87 min", rottenScore: "96%", letterboxdScore: "3.9", description: "A trans sex worker embarks on a mission through Los Angeles subcultures at Christmas. Sean Baker’s wonderful comedy-drama shatters conventions and techniques.", tags: ["Drama", "Comedy"], streaming: "images/netflix.png"},
 { title: "Under the Shadow", year: 2016, image: "images/under2.jpg", poster: "images/under_poster.jpg", runtime: "84 min", rottenScore: "99%", letterboxdScore: "3.5", description: "Set in 1980s war-torn Tehran, a mother suspects an evil force is trying to possess her daughter. Babak Anvari deftly blends genres to deliver a chiller with thought-provoking themes.", tags: ["Horror", "Thriller"], streaming: "images/netflix.png"},
  { title: "The Big Sick", year: 2017, image: "images/big.jpg", poster: "images/big_poster.jpg", runtime: "120 min", rottenScore: "98%", letterboxdScore: "3.8", description: "A comedian and grad student fall in love in Chicago, but have to contend with family expectations and mysterious illness. Funny, smart, and heartfelt - Michael Showalter adds fresh themes to the romcom formula.", tags: ["Comedy", "Romance"], streaming: "images/prime_logo.png"},
{ title: "Roma", year: 2018, image: "images/roma.jpg", poster: "images/roma_poster.jpg", runtime: "135 min", rottenScore: "96%", letterboxdScore: "4.1", description: "In 1970s Mexico City, a domestic worker helps a wealthy family whose father has abandoned them. Alfonso Cuarón tells a powerfully personal story with enthralling command of the medium.", tags: ["Drama"], streaming: "images/netflix.png"},
  { title: "The Lighthouse", year: 2019, image: "images/light2.jpg", poster: "images/light_poster.jpg", runtime: "109 min", rottenScore: "90%", letterboxdScore: "4.0", description: "Two lighthouse keepers try to maintain their sanity on a remote New England island in the 1890s. A gripping thriller brilliantly directed by Robert Eggers, with two powerhouse performances.", tags: ["Thriller", "Drama"], streaming: "images/hbo_logo3.png"},
 { title: "Another Round", year: 2020, image: "images/another.jpg", poster: "images/another_poster.jpg", runtime: "117 min", rottenScore: "93%", letterboxdScore: "4.1", description: "Four jaded teachers in Copenhagen test a theory that maintaining constant drunkenness could improve their lives. Thomas Vinterberg’s tragicomedy offers an intoxicating look at midlife crises.", tags: ["Drama", "Comedy"], streaming: "images/hulu.png"},
 { title: "Summer of Soul", year: 2021, image: "images/summer.jpg", poster: "images/summer_poster.jpg", runtime: "117 min", rottenScore: "99%", letterboxdScore: "4.2", description: "The 1969 Harlem Cultural Festival was a celebration of Black music, culture, and pride. Interweaving incredible live footage with revealing interviews, Questlove’s joyful documentary captures that spirit.", tags: ["Documentary", "Music"], streaming: "images/disney.png"},
 { title: "X", year: 2022, image: "images/x.jpg", poster: "images/x_poster.jpg", runtime: "106 min", rottenScore: "94%", letterboxdScore: "3.4", description: "In 1970s Texas, a crew sets out to make a porn film at the farm of a reclusive elderly couple. Ti West puts a fresh spin on the slasher genre.", tags: ["Horror", "Thriller"], streaming: "images/hbo_logo3.png"},
 { title: "Past Lives", year: 2023, image: "images/past.jpg", poster: "images/past_poster.jpg", runtime: "106 min", rottenScore: "95%", letterboxdScore: "4.2", description: "After decades apart, two childhood friends from Seoul reunite in New York, and confront ideas of love and destiny. Celine Song’s remarkable debut makes penetrating observations about the human condition.", tags: ["Drama", "Romance"], streaming: "images/netflix.png"},
 { title: "Anora", year: 2024, image: "images/anora.jpg", poster: "images/anora_poster.jpg", runtime: "139 min", rottenScore: "93%", letterboxdScore: "3.8", description: "A Brooklyn sex worker impulsively marries the son of a Russian oligarch. Sean Baker flips the Cinderella story upside down with a film that makes you laugh while breaking your heart.", tags: ["Drama", "Comedy"], streaming: "images/hulu.png"},
 { title: "One of Them Days", year: 2025, image: "images/one.jpg", poster: "images/one_poster.jpg", runtime: "97 min", rottenScore: "94%", letterboxdScore: "3.4", description: "Two best friends in LA go to extremes to find rent money in a comical race against the clock. Keke Palmer and SZA dish out laughter and chemistry in Lawrence Lamont’s feel-good buddy-comedy throwback.", tags: ["Comedy"], streaming: "images/netflix.png"},

];


films.forEach((film, i) => {
  const square = document.createElement('div');
  square.classList.add('square');
  square.dataset.index = i;

  /* ✅ Apply rainbow color to closed circles */
  const color = rainbow[i % rainbow.length];
  square.style.backgroundColor = color.light;
  square.style.borderColor = color.dark;

  square.innerHTML = `<span style="color:${color.dark}">${years[i]}</span>`;

  if (openedSquares[i]) revealSquare(square, film);

  square.addEventListener('click', (e) => {
    if (e.target.classList.contains('squareResetBtn')) return;
    if (!square.classList.contains('revealed')) {
      revealSquare(square, film);
      openedSquares[i] = true;
      localStorage.setItem('openedSquaresHAVAL', JSON.stringify(openedSquares));
    } else {
      openModal(film);
    }
  });

  calendar.appendChild(square);
});

/* ✅ Reveal square — image replaces color; only button keeps dark color */
function revealSquare(square, film) {
  square.classList.add('revealed');

  const index = square.dataset.index;
  const color = rainbow[index % rainbow.length];

  square.innerHTML = `
    <button class="squareResetBtn" style="color:${color.dark}">×</button>
    <img src="${film.image}" alt="${film.title}">
  `;

  const closeBtn = square.querySelector('.squareResetBtn');
  closeBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    square.classList.remove('revealed');

    /* restore rainbow look */
    square.style.backgroundColor = color.light;
    square.style.borderColor = color.dark;
    square.innerHTML = `<span style="color:${color.dark}">${film.year}</span>`;

    delete openedSquares[square.dataset.index];
    localStorage.setItem('openedSquaresHAVAL', JSON.stringify(openedSquares));
  });

  square.querySelector('img').addEventListener('click', e => {
    e.stopPropagation();
    openModal(film);
  });
}

const modal = document.getElementById('filmModal');
const closeModal = document.getElementById('closeModal');

function openModal(film) {
  document.getElementById('modalPoster').src = film.poster;
  document.getElementById('modalTitle').textContent = film.title;
  document.getElementById('modalYear').textContent = `(${film.year})`;

  const metaDiv = document.getElementById('modalMeta');
  metaDiv.innerHTML = '';
  if (film.runtime) metaDiv.innerHTML += `<span>${film.runtime}</span>`;
  if (film.rottenScore) metaDiv.innerHTML += `<img src='images/rotten_icon.png' style='height:20px;'> <span>${film.rottenScore}</span>`;
  if (film.letterboxdScore) metaDiv.innerHTML += `<img src='images/letterboxd_icon.png' style='height:20px;'> <span>${film.letterboxdScore}</span>`;

  document.getElementById('modalTags').textContent = film.tags ? film.tags.join(' / ') : '';

  const streamingImg = document.getElementById('modalStreaming');
  if (film.streaming) {
    streamingImg.src = film.streaming;
    streamingImg.style.display = 'inline';
  } else {
    streamingImg.style.display = 'none';
  }

  document.getElementById('modalDesc').textContent = film.description;
  modal.style.display = "flex";
}

closeModal.onclick = () => modal.style.display = 'none';
window.onclick = (e) => { if (e.target === modal) modal.style.display = 'none'; };

/* ✅ Reveal All — opens every unrevealed square */
document.getElementById('revealAll').addEventListener('click', () => {
  document.querySelectorAll('.square').forEach((square, i) => {
    if (!square.classList.contains('revealed')) {
      revealSquare(square, films[i]);
      openedSquares[i] = true;
    }
  });
  localStorage.setItem('openedSquaresHAVAL', JSON.stringify(openedSquares));
});
  
document.getElementById('resetAll').addEventListener('click', () => {
  localStorage.removeItem('openedSquaresHAVAL');
  location.reload();
});
</script>

</body>
</html>
